<!DOCTYPE html>
<meta charset="utf-8">
<style>

body {
  height: 100%
}

footer {
  position: absolute;
  bottom: 0;
  width: 100%;
  text-align: center;
  height: 5%;
}

img {
  margin: auto;
  width: 10%;
}

input {
  width: 50%;
}

#map {
  height: 400px;
  width: 100%;
}


</style>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <!-- The above 3 meta tags *must* come first in the head; any other head content must come *after* these tags -->
    <meta name="description" content="Stella, a sweet, language aware AI.">
    <meta name="author" content="Dante Tam">
    <link rel="icon" href="../favicon.ico">

    <title>Stella</title>

    <!-- Bootstrap core CSS -->
    <link href="../../../dist/css/bootstrap.min.css" rel="stylesheet">

    <!-- IE10 viewport hack for Surface/desktop Windows 8 bug -->
    <link href="../../../assets/css/ie10-viewport-bug-workaround.css" rel="stylesheet">

    <!-- Custom styles for this template -->
    <link href="index.css" rel="stylesheet">
		<link href="default.css" rel="stylesheet">

    <!-- Just for debugging purposes. Don't actually copy these 2 lines! -->
    <!--[if lt IE 9]><script src="../../assets/js/ie8-responsive-file-warning.js"></script><![endif]-->
    <script src="../../../assets/js/ie-emulation-modes-warning.js"></script>

    <!-- HTML5 shim and Respond.js for IE8 support of HTML5 elements and media queries -->
    <!--[if lt IE 9]>
      <script src="https://oss.maxcdn.com/html5shiv/3.7.2/html5shiv.min.js"></script>
      <script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
    <![endif]-->

		<!--<script src="d3.v3.min.js"></script>-->
		<script src="https://d3js.org/d3.v3.min.js" charset="utf-8"></script>
		<script src="https://d3js.org/d3-random.v1.min.js"></script>
    <script src="https://d3js.org/d3-timer.v1.min.js"></script>
    <script src="https://d3js.org/d3-array.v1.min.js"></script>
    <script src="https://d3js.org/d3-collection.v1.min.js"></script>
    <script src="https://d3js.org/d3-queue.v2.min.js"></script>

    <script src="d3.hexbin.min.js"></script>
    <script type="text/javascript" src="data.js"></script>

    <script src="./maps.js"></script>

  </head>

  <body>
    <nav class="navbar navbar-intro navbar-fixed-top navie">
      <div class="container">
        <div class="navbar-header">
          <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false" aria-controls="navbar">
            <span class="sr-only">Toggle navigation</span>
						<span class="icon-bar"></span>
						<span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
						<span class="icon-bar"></span>
						<span class="icon-bar"></span>
          </button>
        </div>
        <div id="navbar" class="collapse navbar-collapse">
          <ul class="nav navbar-nav navbar-intro">
						<li class="dropdown">
							<a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-haspopup="true" aria-expanded="false">@dantetam<span class="caret"></span></a>
							<ul class="dropdown-menu">
								<li class="dropdown-header">Professional</li>
								<li><a href="https://github.com/dantetam" target="_blank">GitHub</a></li>
								<li><a href="mailto:dante.tam1@gmail.com">E-mail</a></li>
								<li role="separator" class="divider"></li>
								<li class="dropdown-header">Personal</li>
								<li><a href="#"></a></li>
								<li><a href="#"></a></li>
							</ul>
						</li>
            <li><a href="../../../index.html">Home</a></li>
            <li><a href="../../projects.html">Personal Projects</a></li>
						<li><a href="../../writings.html">Writings</a></li>
						<li class="dropdown">
							<a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-haspopup="true" aria-expanded="false">Technical Drawings<span class="caret"></span></a>
							<ul class="dropdown-menu">
								<li class="dropdown-header">Design</li>
								<li><a href="../../opstrykon_gdd.pdf">Game Design Document</a></li>
								<li><a href="../../drawings.html">Architecture</a></li>
								<li role="separator" class="divider"></li>
								<li class="dropdown-header">Nav header</li>
								<li><a href="#"></a></li>
								<li><a href="#"></a></li>
							</ul>
						</li>
						<li><a href="../../courses.html">Courses</a></li>
						<li><a href="../../resume.pdf">Resume</a></li>
						<li class="dropdown active">
							<a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-haspopup="true" aria-expanded="false">Experiments<span class="caret"></span></a>
							<ul class="dropdown-menu">
								<li class="dropdown-header">Design and Data</li>
								<li><a href="../../experiments/resume/index.html">Interactive Resume (d3.js)</a></li>
								<li><a href="../../experiments/testglwebsite/src/index.html">Graphics (WebGL)</a></li>
								<li class="active"><a href="../../experiments/datavisual/index.html">Data Visualization (d3.js)</a></li>
								<li role="separator" class="divider"></li>
								<li><a href="#"></a></li>
								<li><a href="#"></a></li>
							</ul>
						</li>
          </ul>
        </div><!--/.nav-collapse -->
      </div>
    </nav>

    <div class="container">

      <div class="intro" id="stella-intro">
        <div id="stella-chat"><h3>Hi, I'm Stella!</h3></div>
        <input type="text" id="user-input" value="">
      </div>

      <div
        class="fb-like"
        data-share="true"
        data-width="450"
        style="width: 10%; height: 10%;"
        data-show-faces="true">Loading FB integration...
      </div>

      <button id="authorize-button" class="btn btn-primary" style="opacity: 0;">Integrate Gmail</button>
      <button id="logout-button" class="btn" onclick="javascript:logOutGmail();" style="opacity: 0;">Log Out Gmail</button>

      <!--<div class="fb-login-button" data-max-rows="1" data-size="medium" data-show-faces="false" data-auto-logout-link="true"></div>-->
      <fb:login-button scope="public_profile,email,pages_messaging" onlogin="checkLoginState();">
      </fb:login-button>

      <button id="fb-logout-button" class="btn" onclick="javascript:logOutFacebook();" style="opacity: 1;">Log Out Facebook</button>

      <div id="map"></div>

      <table id="email-display" class="table table-striped table-inbox hidden" style="display: none;">
        <thead>
          <tr>
            <th>From</th>
            <th>Subject</th>
            <th>Labels</th>
            <th>Date/Time</th>
          </tr>
        </thead>
        <tbody></tbody>
      </table>

      <!--
      <div class="fb-send-to-messenger"
        messenger_app_id="APP_ID"
        page_id="PAGE_ID"
        data-ref="PASS_THROUGH_PARAM"
        color="blue"
        size="standard">
      </div>
      -->

      <!--
      <div class="intro">

      </div>
      -->

    </div><!-- /.container -->

    <!-- Bootstrap core JavaScript
    ================================================== -->
    <!-- Placed at the end of the document so the pages load faster -->
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.3/jquery.min.js"></script>
    <script>window.jQuery || document.write('<script src="../../../assets/js/vendor/jquery.min.js"><\/script>')</script>
    <script src="../../../dist/js/bootstrap.js"></script>
    <!-- IE10 viewport hack for Surface/desktop Windows 8 bug -->
    <script src="../../../assets/js/ie10-viewport-bug-workaround.js"></script>
    <script src="cookie.js"></script>

    <script src="./parse.js"></script>
    <script src="./commands.js"></script>
    <script src="./gmail.js"></script>
    <script src="./google-calendar.js"></script>
    <script src="./fb.js"></script>

    <script>

    document.getElementById("user-input").value = "";

    var pastCommands = [];
    var pastCommandIndex = -1;

    function updateDisplay() {

    }

    function executeCommand(commandString) {
      d3.select("#authorize-button").style("opacity", 0);
      d3.select("#logout-button").style("opacity", 0);
      d3.select("#email-display").style("display", "none");

      if (commandString.replace(/ /g,'').length === 0) {
        return;
      }

      var command = parseCommand(commandString);
      var task = findStellaTaskRelatedToCommand(commandString);

      var qualifiers = getQualifiersFromTask(task);
      var newParsed = parseNounVerbPredicate(commandString, qualifiers);

      task.execute(command, newParsed);

      console.log(command);
      console.log(newParsed);
    }

    readWordNet("./dict/data.adj");
    readWordNet("./dict/data.verb");
    readWordNet("./dict/data.noun");
    readWordNet("./dict/data.adv");
    //readDefinitions("./definitions.txt");
    readPrepositions("./dict/prepositions.txt");
    readConjunctions("./dict/conjunctions.txt");
    readLexemeExceptions("./dict/noun.exc");
    readLexemeExceptions("./dict/verb.exc");
    readLexemeExceptions("./dict/adj.exc");

    //var command = parseCommand("search Google for some traitor");
    //console.log(command);

    findAssociatedWords("define");

    //var command = parseCommand("search Google for UC Berkeley");
    //var task = findStellaTaskRelatedToCommand("search Google for UC Berkeley");
    //task.execute(command);

    //findStellaTaskRelatedToCommand("research");
    //findStellaTaskRelatedToCommand("research Google");

    document.getElementById("user-input")
      .addEventListener("keyup", function(event) {
        event.preventDefault();
        if (event.keyCode === 13) {
          var currentText = document.getElementById("user-input").value;
          executeCommand(currentText);
          pastCommands.push(currentText);
          pastCommandIndex = pastCommands.length;
          document.getElementById("user-input").value = "";
        }
        else if (event.keyCode === 38) { //up arrow
          if (pastCommandIndex - 1 >= 0 && pastCommandIndex - 1 <= pastCommands.length) {
            pastCommandIndex--;
            if (pastCommandIndex === pastCommands.length) {
              document.getElementById("user-input").value = "";
            }
            else {
              document.getElementById("user-input").value = pastCommands[pastCommandIndex];
            }
          }
        }
        else if (event.keyCode === 40) { //down arrow
          if (pastCommandIndex + 1 >= 0 && pastCommandIndex + 1 <= pastCommands.length) {
            pastCommandIndex++;
            if (pastCommandIndex === pastCommands.length) {
              document.getElementById("user-input").value = "";
            }
            else {
              document.getElementById("user-input").value = pastCommands[pastCommandIndex];
            }
          }
        }
      });

    /*
    function initMap() {
      var uluru = {lat: -25.363, lng: 131.044};
      var map = new google.maps.Map(document.getElementById('map'), {
        zoom: 4,
        center: uluru
      });
      var marker = new google.maps.Marker({
        position: uluru,
        map: map
      });
      //console.log("initialized map");
    }
    */

    window.fbAsyncInit = function() {
      FB.init({
        appId      : '1454216364589758',
        cookie     : true,  // enable cookies to allow the server to access
                            // the session
        xfbml      : true,  // parse social plugins on this page
        version    : 'v2.8' // use graph api version 2.8
      });
      //FB.AppEvents.logPageView();
    };

    function init(d, s, id) {
      var js, fjs = d.getElementsByTagName(s)[0];
      if (d.getElementById(id)) {return;}
      js = d.createElement(s); js.id = id;
      js.src = "https://connect.facebook.net/en_US/sdk.js";
      fjs.parentNode.insertBefore(js, fjs);
    }
    init(document, 'script', 'facebook-jssdk');

    </script>

    <script src="https://apis.google.com/js/client.js?onload=handleClientLoad"></script>
    <script src="./wikipedia.js"></script>

    <script>

    getWikipediaContentForSubjects(["Water"], function(pageContent) {
      var wordMap = findWordMap(pageContent);
      var energy = getEnergy(wordMap, pageContent);
      var topSentences = getTopSentencesFromText(wordMap, pageContent);
      console.log(topSentences);
      removeAllTokens(pageContent);
    });

    </script>

    <script
    src="https://maps.googleapis.com/maps/api/js?key=AIzaSyClTWJV_mKBgGjO4MZ4t2kxnilvNHSjHes&libraries=places&callback=initMap">
    </script>

    <!--
    <footer>
      <p>Princeton University "About WordNet." WordNet. Princeton University. 2010. &lt;<a href=http://wordnet.princeton.edu></a>&gt;</p>
    </footer>
    -->

    <script>

    </script>

  </body>
</html>
